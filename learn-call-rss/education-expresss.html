<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>VNExpress Giáo dục – News Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:Inter,system-ui,sans-serif;background:#fafafa;margin:0;color:#222;}
    header{background:#4D2B12;color:#fff;padding:16px;text-align:center;}
    h1{margin:0;font-size:20px}
    main{max-width:900px;margin:24px auto;padding:0 16px;}
    .cards{display:grid;gap:16px;}
    .card{background:#fff;border-radius:14px;overflow:hidden;
      box-shadow:0 4px 10px rgba(0,0,0,.08);display:grid;grid-template-columns:120px 1fr;}
    .thumb{width:100%;height:100%;object-fit:cover;background:#eee;}
    .content{padding:12px 14px;}
    .title{font-weight:700;margin:0 0 8px;font-size:16px;}
    .title a{text-decoration:none;color:#111;}
    .desc{font-size:14px;color:#555;line-height:1.4;}
    .meta{font-size:12px;color:#888;margin-top:8px;}
    button{background:#4D2B12;color:#fff;border:none;border-radius:8px;padding:8px 16px;cursor:pointer;}
    footer{text-align:center;font-size:13px;color:#777;padding:20px 0;}
  </style>
</head>
<body>
  <header>
    <h1>Tin Giáo dục mới nhất từ VNExpress</h1>
    <button id="reloadBtn">Làm mới</button>
  </header>

  <main>
    <div id="status">Đang tải...</div>
    <div id="cards" class="cards"></div>
  </main>

  <footer>Nguồn dữ liệu: <a href="https://vnexpress.net/rss/giao-duc.rss" target="_blank">VNExpress Giáo dục RSS</a></footer>

  <script>
    const RSS_URL = "https://vnexpress.net/rss/giao-duc.rss";
    const cards = document.getElementById('cards');
    const statusEl = document.getElementById('status');

    async function fetchRSS(url){
      try{
        const res = await fetch(url);
        if(!res.ok) throw new Error('HTTP '+res.status);
        return await res.text();
      }catch{
        const proxy = "https://api.allorigins.win/raw?url="+encodeURIComponent(url);
        const res = await fetch(proxy);
        if(!res.ok) throw new Error('Proxy lỗi');
        return await res.text();
      }
    }

    function parseRSS(xmlText){
      const doc = new DOMParser().parseFromString(xmlText,'application/xml');
      const items = [...doc.querySelectorAll('item')].map(it=>{
        const title = it.querySelector('title')?.textContent || '';
        const link = it.querySelector('link')?.textContent || '#';
        const descRaw = it.querySelector('description')?.textContent || '';
        const desc = descRaw.replace(/<[^>]+>/g,'').trim();
        const img = (descRaw.match(/<img[^>]+src=["']([^"']+)["']/i)||[])[1];
        const date = it.querySelector('pubDate')?.textContent || '';
        return {title,link,desc,img,date};
      });
      return items;
    }

    function render(items){
      cards.innerHTML='';
      for(const it of items){
        const card=document.createElement('div');
        card.className='card';
        if(it.img){
          const img=document.createElement('img');
          img.src=it.img;img.className='thumb';
          card.appendChild(img);
        }
        const content=document.createElement('div');
        content.className='content';
        content.innerHTML=`<h3 class="title"><a href="${it.link}" target="_blank">${it.title}</a></h3>
          <div class="desc">${it.desc}</div>
          <div class="meta">${new Date(it.date).toLocaleString('vi-VN')}</div>`;
        card.appendChild(content);
        cards.appendChild(card);
      }
    }

    async function loadFeed(){
      statusEl.textContent='Đang tải...';
      try{
        const xml=await fetchRSS(RSS_URL);
        const items=parseRSS(xml);
        render(items);
        statusEl.textContent=`Đã tải ${items.length} bài (${new Date().toLocaleTimeString('vi-VN')})`;
      }catch(e){
        statusEl.textContent='Lỗi tải RSS.';
      }
    }

    document.getElementById('reloadBtn').addEventListener('click',loadFeed);
    loadFeed();
    setInterval(loadFeed,300000); // auto 5 phút
  </script>
</body>
</html>
